<div id="hashUserManager" style="padding-top: 4rem;"></div>
<div class="container-fluid py-3" id="container_UserManager">
  <ul class="nav nav-tabs" id="usersTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button"
        role="tab" aria-controls="users" aria-selected="false">
        <i class="bi bi-people me-1"></i> 用户管理
      </button>
    </li>
  </ul>

  <div class="tab-content p-3 border border-top-0 rounded-bottom" id="usersTabContent">
    <!-- 用户管理面板 -->
    <div class="tab-pane fade show active" id="users" role="tabtheme_nascorepage" aria-labelledby="users-tab">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="m-0">用户管理</h3>
        <div class="d-flex align-items-center gap-2">
          <input type="text" class="form-control" id="searchUsername" placeholder="用户名" style="width: 8rem;">
          <input type="text" class="form-control" id="searchHomeDir" placeholder="主目录" style="width: 8rem;">
          <button type="button" class="btn btn-outline-primary" id="searchBtn">检索</button>
        </div>
        <button type="button" class="btn btn-primary" id="addUserBtn" data-bs-toggle="modal"
          data-bs-target="#addUserModal">
          <i class="bi bi-person-plus me-1"></i> 添加用户
        </button>
      </div>

      <div class="table-responsive">
        <table class="table table-hover" id="usersTable">
          <thead>
            <tr>
              <th scope="col">用户ID</th>
              <th scope="col">用户名</th>
              <th scope="col">密码</th>
              <th scope="col">主目录</th>
              <th scope="col">管理员</th>
              <th scope="col">操作</th>
            </tr>
          </thead>
          <tbody id="usersTableBody" data-bind="Users" data-bind-handler="renderUsersTable">
            <!-- 动态生成用户数据 -->
          </tbody>
        </table>
      </div>
      <div class="d-flex justify-content-between align-items-center mt-2">
        <div>
          <label>每页数量：</label>
          <select id="pageSizeSelect" class="form-select d-inline-block" style="width: 6rem;">
            <option value="10">10</option>
            <option value="20" selected>20</option>
            <option value="50">50</option>
            <option value="100">100</option>
            <option value="200">200</option>
          </select>
        </div>
        <div>
          <button class="btn btn-outline-secondary btn-sm" id="prevPageBtn">上一页</button>
          <span id="pageInfo" class="mx-2">第 1 页</span>
          <button class="btn btn-outline-secondary btn-sm" id="nextPageBtn">下一页</button>
        </div>
        <div>
          <span id="totalInfo"></span>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- 添加用户模态框  不可以用 <form></form> 会影响外部form的闭合-->
<div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addUserModalLabel">添加用户</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="addUserForm">
          <div class="mb-3">
            <label for="username" class="form-label">用户名</label>
            <input type="text" class="form-control" id="addUsername" name="username">
          </div>
          <div class="mb-3">
            <label for="passwd" class="form-label">密码
              <input type="password" class="form-control" id="addPasswd" name="passwd">
          </div>
          <div class="mb-3">
            <label for="home" class="form-label">主目录</label>
            <input type="text" class="form-control" id="addHome" name="home">
          </div>
          <div class="mb-3">
            <label class="form-label">管理员</label>
            <input type="checkbox" id="addIsAdmin" name="isadmin"> 是
          </div>

        </div>
        <small class="form-text text-muted">
        </small>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary" id="saveUserBtn">保存</button>
      </div>
    </div>
  </div>
</div>

<!-- 编辑用户模态框 不可以用 <form></form> 会影响外部form的闭合-->
<div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editUserModalLabel">编辑用户</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="editUserForm">
          <div class="mb-3">
            <label for="editUsername" class="form-label">用户名</label>
            <input type="text" class="form-control" id="editUsername" name="username" readonly>
          </div>
          <div class="mb-3">
            <label for="editPasswd" class="form-label">密码 </label>
            <input type="password" class="form-control" id="editPasswd" name="passwd">
          </div>
          <div class="mb-3">
            <label for="editHome" class="form-label">主目录</label>
            <input type="text" class="form-control" id="editHome" name="home">
          </div>
          <div class="mb-3">
            <label class="form-label">管理员</label>
            <input type="checkbox" id="editIsAdmin" name="isadmin"> 是
          </div>
        </div>
        <small class="form-text text-muted">
        </small>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary" id="updateUserBtn">保存</button>
      </div>
    </div>
  </div>
</div>

